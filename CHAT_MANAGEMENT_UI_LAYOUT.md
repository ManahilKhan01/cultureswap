# Chat Management UI Layout & Flow

## Header Layout (Left Panel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  Messages                            â‹® (MENU)  â”‚
â”‚                                                 â”‚
â”‚  [Search people...                         ğŸ”] â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Three-Dot Menu Dropdown

```
â‹® (Click)
â””â”€ Dropdown:
   â”œâ”€ ğŸ”” Unread
   â”œâ”€ â­ Starred
   â”œâ”€ ğŸ Custom Offers
   â”œâ”€ ğŸ’¬ Assistant Chats
   â”œâ”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â”œâ”€ ğŸ“¦ Archived
   â”œâ”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   â””â”€ âœ• Clear Filter (if active)
```

## Chat List Item (Normal State)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  [Avatar] User Name              Time           â”‚
â”‚           Last message preview...               â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Chat List Item (With Star)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  [Avatar] â­ User Name            Time           â”‚
â”‚           Last message preview...               â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Chat List Item (With Assistant Badge)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  [Avatar]                                        â”‚
â”‚   ğŸ”µ                User Name       Time        â”‚
â”‚           Last message preview...               â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Chat List Item (Hover State - Shows Context Menu)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  [Avatar] â­ User Name              â‹® (MENU)    â”‚
â”‚           Last message preview...               â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Chat Context Menu

```
Chat Item (Hover)
â””â”€ â‹® (Click)
   â””â”€ Dropdown:
      â”œâ”€ â­ Star / â­ Unstar
      â”œâ”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      â””â”€ ğŸ“¦ Archive / Unarchive
```

## Full Chat List View with Filter Applied

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Messages                         â‹® (ACTIVE)    â”‚ â† Active filter highlighted
â”‚  [Search people...]                             â”‚
â”‚                                                 â”‚
â”‚  â­ Starred Filter Active âœ“                      â”‚
â”‚                                                 â”‚
â”‚  Filtered Conversations:                        â”‚
â”‚                                                 â”‚
â”‚  [Avatar] â­ John Doe              12:30 PM     â”‚
â”‚           Hey, how are you?                    â”‚
â”‚                                                 â”‚
â”‚  [Avatar] â­ Jane Smith             3:45 PM     â”‚
â”‚           Thanks for the help!                 â”‚
â”‚                                                 â”‚
â”‚  No more starred conversations                  â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Filter States

### All Conversations (Default)
```
âœ“ All conversations shown
âœ“ Archived hidden
âœ“ All chat types visible
âœ“ No special filter active
```

### Unread Filter
```
âœ“ Only conversations with unread messages shown
âœ“ Current user must be receiver
âœ“ Latest message must be unread
âœ“ Real-time updates as messages read
```

### Starred Filter
```
âœ“ Only conversations marked as starred shown
âœ“ Gold star visible on items
âœ“ Archived hidden unless in archived filter
âœ“ User-specific
```

### Archived Filter
```
âœ“ Only archived conversations shown
âœ“ Main conversation list hidden
âœ“ User can unarchive from context menu
âœ“ Not shown in other filters
```

### Custom Offers Filter
```
âœ“ Only offer-related conversations shown
âœ“ Conversations with swap context
âœ“ Separated from regular chats
```

### Assistant Chats Filter
```
âœ“ Only support/system chats shown
âœ“ Identified by name pattern
âœ“ Blue badge on avatar
âœ“ Separated from user chats
```

## State Transitions

```
User Opens Messages
      â†“
Load Conversations + Metadata
      â†“
Display All Conversations (Default)
      â†“
User Clicks â‹® Menu
      â†“
Show Filter Options
      â†“
User Selects Filter
      â†“
Apply Filter + Update UI Instantly
      â†“
Filter Remains Active
      â†“
User Hovers Chat Item
      â†“
Show Context Menu (â‹®)
      â†“
User Clicks Star/Archive
      â†“
Toggle State + Update DB
      â†“
Real-Time Update (Other Tabs/Devices)
```

## Keyboard Behavior

```
Click outside dropdown    â†’ Menu closes
Select option             â†’ Menu closes + Filter applied
Hover chat                â†’ Context menu appears
Click elsewhere on chat   â†’ Context menu closes
Tab/Multi-Tab             â†’ Real-time sync updates
```

## Visual Indicators Legend

```
Icon/Style              Meaning
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â­ Gold Star            Chat is starred
ğŸ”” Bell Icon            Unread filter active
ğŸ“¦ Box Icon             Archive filter active
ğŸ’¬ Chat Icon            Assistant chats filter
ğŸ Gift Icon            Custom offers filter
âœ• X Icon                Clear filter
â‹® Three Dots            Menu button
ğŸ”µ Blue Dot             Assistant/Support user
ğŸŸ¢ Green Dot            Online status (future)
Bold Text               Unread message
Normal Text             Read message
Highlighted Row         Selected conversation
```

## Mobile Responsiveness

```
Desktop (md+):
â”œâ”€ Left Panel (320px) | Right Panel (flex)
â””â”€ Both visible simultaneously

Mobile (< md):
â”œâ”€ Show Left Panel When: No conversation selected
â”œâ”€ Show Right Panel When: Conversation selected
â”œâ”€ Back button in header to return to list
â””â”€ Menu still accessible in header
```

## Interaction Timing

```
Action              Expected Behavior
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Click â‹® Menu        Instant dropdown appear
Select Filter       Instant UI update (0ms)
Click Star          Instant star appear
Save to DB          Fast (~100ms)
Other Tab Updates   Real-time (~200-500ms)
Hover Chat          Instant context menu
Click Archive       Instant hide + save
Unarchive           Instant restore
```

## Error States

```
No Conversations
â””â”€ Message: "No conversations found"
   â””â”€ Shows when no chats match filter

Database Error
â””â”€ Toast: "Failed to star chat"
   â””â”€ User can retry

Network Error
â””â”€ Toast: "Connection lost"
   â””â”€ Data local until reconnect
```

## Accessibility

```
âœ“ Semantic HTML
âœ“ ARIA labels on buttons
âœ“ Keyboard navigation
âœ“ Tab order logical
âœ“ Color + icon distinction
âœ“ Contrast ratios met
âœ“ Touch targets 48px minimum
âœ“ Screen reader friendly
```

---

## Quick Visual Summary

### Before Implementation
```
Messages  â‹®
[Search]
[Chat 1]
[Chat 2]
[Chat 3]
```

### After Implementation
```
Messages  â‹® â† Now has menu with filters
[Search]
[Chat 1] â‹® â† Now has context menu
[â­ Chat 2] â‹®
[ğŸ”µ Chat 3] â‹® â† Assistant badge
```

### With Filter Active (Starred)
```
Messages  â‹® [STARRED âœ“] â† Shows active filter
[Search]
[â­ Chat 2] â‹®
[â­ Chat 5] â‹®
```
